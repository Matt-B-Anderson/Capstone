(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{36:function(e,t,n){},61:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(28),s=n.n(a),o=n(9),i=(n(36),n(3)),j=n(0);function l(e){var t=e.logout,n=e.getMonster;return Object(j.jsxs)("div",{className:"navbar",children:[Object(j.jsx)(o.b,{to:"/character",children:"Character"}),Object(j.jsx)(o.b,{onClick:n,to:"/battle",children:"Battle"}),Object(j.jsx)(o.b,{to:"/store",children:"Store"}),Object(j.jsx)("button",{onClick:t,children:"Logout"})]})}var u=n(12),h=n(2),b=n(10);function O(e){var t=e.handleChange,n=e.handleSubmit,c=e.btnText,r=e.errMsg,a=e.inputs,s=a.username,o=a.password;return Object(j.jsxs)("form",{onSubmit:n,children:[Object(j.jsx)("input",{type:"text",value:s,name:"username",onChange:t,placeholder:"Username"}),Object(j.jsx)("input",{type:"text",value:o,name:"password",onChange:t,placeholder:"Password"}),Object(j.jsx)("button",{children:c}),Object(j.jsx)("p",{style:{color:"red"},children:r})]})}var d=n(14),m=n.n(d),g=r.a.createContext(),x=m.a.create();function f(e){var t={user:JSON.parse(localStorage.getItem("user"))||{},token:localStorage.getItem("token")||"",character:{},monster:{},errMsg:""},n=Object(c.useState)(t),r=Object(b.a)(n,2),a=r[0],s=r[1];function o(e){s((function(t){return Object(h.a)(Object(h.a)({},t),{},{errMsg:e})}))}return Object(j.jsx)(g.Provider,{value:Object(h.a)(Object(h.a)({},a),{},{setUserState:s,signup:function(e){m.a.post("/auth/signup",e).then((function(e){var t=e.data,n=t.user,c=t.token;localStorage.setItem("token",c),localStorage.setItem("user",JSON.stringify(n)),s((function(e){return Object(h.a)(Object(h.a)({},e),{},{user:n,token:c})}))})).catch((function(e){return o(e.response.data.errMsg)}))},login:function(e){m.a.post("/auth/login",e).then((function(e){var t=e.data,n=t.user,c=t.token;localStorage.setItem("token",c),localStorage.setItem("user",JSON.stringify(n)),s((function(e){return Object(h.a)(Object(h.a)({},e),{},{user:n,token:c})}))})).then((function(){return x.get("/characterApi/character/user").then((function(e){console.log(e.data),s((function(t){return Object(h.a)(Object(h.a)({},t),{},{character:e.data})}))})).catch((function(e){return console.log(e.response.data.errMsg)}))})).catch((function(e){return o(e.response.data.errMsg)}))},logout:function(){localStorage.removeItem("token"),localStorage.removeItem("user"),s((function(){return Object(h.a)(Object(h.a)({},t),{},{user:{},token:""})}))},resetAuthErr:function(){s((function(e){return Object(h.a)(Object(h.a)({},e),{},{errMsg:""})}))},createCharacter:function(e){x.post("/characterApi/character",e).then((function(e){s((function(t){return Object(h.a)(Object(h.a)({},t),{},{character:e.data})}))})).catch((function(e){return e.response.data.errMsg}))},getMonster:function(){m.a.get("/monsterApi/monster").then((function(e){s((function(t){return Object(h.a)(Object(h.a)({},t),{},{monster:e.data})}))}))}}),children:e.children})}x.interceptors.request.use((function(e){var t=localStorage.getItem("token");return e.headers.Authorization="Bearer ".concat(t),e}));var p={username:"",password:""};function v(){var e=Object(c.useState)(p),t=Object(b.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(!1),s=Object(b.a)(a,2),o=s[0],i=s[1],l=Object(c.useContext)(g),d=l.signup,m=l.login,x=l.errMsg,f=l.resetAuthErr;function v(e){var t=e.target,n=t.name,c=t.value;r((function(e){return Object(h.a)(Object(h.a)({},e),{},Object(u.a)({},n,c))}))}function k(){i((function(e){return!e})),f()}return Object(j.jsxs)("div",{className:"auth-container",children:[Object(j.jsx)("h1",{children:"DIMENSIONAL PIT"}),o?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(O,{handleChange:v,handleSubmit:function(e){e.preventDefault(),m(n)},inputs:n,btnText:"Login",errMsg:x}),Object(j.jsx)("p",{onClick:k,children:"Not a member?"})]}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(O,{handleChange:v,handleSubmit:function(e){e.preventDefault(),d(n)},inputs:n,btnText:"Sign up",errMsg:x}),Object(j.jsx)("p",{onClick:k,children:"Already a member?"})]})]})}function k(){var e=Object(c.useContext)(g),t=e.character,n=e.createCharacter,r={name:""},a=Object(c.useState)(r),s=Object(b.a)(a,2),o=s[0],i=s[1];return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("h1",{className:"character-name",children:["Welcome ",t.name]}),Object(j.jsx)("div",{className:"character",children:t.name?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"character-",children:[Object(j.jsx)("h2",{children:"Your Stats:"}),Object(j.jsxs)("ul",{children:[Object(j.jsxs)("li",{children:["Health: ",t.health]}),Object(j.jsxs)("li",{children:["Strength: ",t.strength]})]}),Object(j.jsx)("h2",{children:"Your Items:"}),Object(j.jsxs)("ul",{children:[Object(j.jsxs)("li",{children:["Gold: ",t.gold]}),Object(j.jsxs)("li",{children:["Health Potions: ",t.healthPotion]})]})]}),Object(j.jsx)("div",{className:"character-picture",style:{backgroundImage:"url(https://i.pinimg.com/originals/11/28/d2/1128d22436b6e56397ae3f7fa05449c1.jpg)"}})]}):Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("form",{className:"character-form",onSubmit:function(e){e.preventDefault(),n(o),i(r)},children:[Object(j.jsx)("input",{type:"text",name:"name",value:t.name,onChange:function(e){var t=e.target,n=t.name,c=t.value;i((function(e){return Object(h.a)(Object(h.a)({},e),{},Object(u.a)({},n,c))}))},placeholder:"Enter Desired Character Name"}),Object(j.jsx)("button",{children:"Create Character"})]})})})]})}function S(e){var t=e.charHealth,n=e.monstHealth,c=e.monsterName;e.damage;return Object(j.jsxs)("p",{className:"battle-text",children:[" Your current health is ",t," and ",c,"'s health is ",n,". Continue your fight by clicking Fight! if you dare. "]})}function N(){var e=Object(c.useContext)(g),t=e.character,n=e.monster,r=e.setUserState,a=e.getMonster,s=Object(c.useState)(),o=Object(b.a)(s,2),l=o[0],u=o[1],O=Object(i.g)();function d(e,t){var n,c=(n=e.strength,Math.floor(Math.random()*Math.floor(2*n)));return u(c),t.health=t.health-c,t.health}return console.log(t),console.log(n),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h1",{className:"monster-name",children:n.name}),Object(j.jsxs)("div",{className:"battle",children:[Object(j.jsx)("div",{className:"battle-picture",style:{backgroundImage:"url(".concat(n.image,")")}}),Object(j.jsx)(S,{charHealth:t.health,monstHealth:n.health,monsterName:n.name,damage:l}),Object(j.jsxs)("span",{children:[!t.health<=0&&!n.health<=0?Object(j.jsx)("button",{onClick:function(){return function(e,t){var n=d(e,t),c=d(t,e);r((function(e){return Object(h.a)(Object(h.a)({},e),{},{character:Object(h.a)(Object(h.a)({},e.character),{},{health:c}),monster:Object(h.a)(Object(h.a)({},e.monster),{},{health:n})})}))}(t,n)},children:"Fight!"}):Object(j.jsx)("button",{onClick:function(){return a()},children:"New Monster"}),Object(j.jsx)("button",{onClick:function(){O.push("character")},children:"Run!"})]})]})]})}function C(e){var t=e.health;return Object(j.jsxs)("p",{className:"store-text",children:["Your current health is ",t]})}function M(){var e=Object(c.useContext)(g),t=e.character,n=e.setUserState;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h1",{className:"store-title",children:"The Store"}),Object(j.jsxs)("div",{className:"store",children:[Object(j.jsx)("div",{className:"store-picture",style:{backgroundImage:"url(https://i.pinimg.com/originals/af/eb/0a/afeb0a18536d438b5f97d13f291b5c33.jpg)"}}),Object(j.jsxs)("div",{className:"potions",children:[Object(j.jsx)("img",{className:"potion-picture",src:"https://i.pinimg.com/originals/ed/fb/02/edfb023fc8730e52974b69f6607cc8a4.jpg",alt:""}),Object(j.jsx)("button",{onClick:function(){n((function(e){return Object(h.a)(Object(h.a)({},e),{},{character:Object(h.a)(Object(h.a)({},e.character),{},{health:100})})}))},children:"Buy Potion"})]}),Object(j.jsx)(C,{health:t.health})]})]})}var I=n(31);function y(e){var t=e.path,n=e.redirectTo,c=e.component,r=e.token,a=Object(I.a)(e,["path","redirectTo","component","token"]);return r?Object(j.jsx)(i.b,{path:t,render:function(){return Object(j.jsx)(c,Object(h.a)({},a))}}):Object(j.jsx)(i.a,{to:n})}function T(){var e=Object(c.useContext)(g),t=e.token,n=e.logout,r=e.getMonster;return Object(j.jsxs)("div",{className:"App",children:[t&&Object(j.jsx)(l,{logout:n,getMonster:r}),Object(j.jsxs)(i.d,{children:[Object(j.jsx)(i.b,{exact:!0,path:"/",render:function(){return t?Object(j.jsx)(i.a,{to:"/character"}):Object(j.jsx)(v,{})}}),Object(j.jsx)(y,{path:"/character",component:k,redirectTo:"/",token:t}),Object(j.jsx)(y,{path:"/battle",component:N,redirectTo:"/",token:t}),Object(j.jsx)(y,{path:"/store",component:M,redirectTo:"/",token:t})]})]})}s.a.render(Object(j.jsx)(o.a,{children:Object(j.jsx)(f,{children:Object(j.jsx)(T,{})})}),document.getElementById("root"))}},[[61,1,2]]]);
//# sourceMappingURL=main.89dd383e.chunk.js.map